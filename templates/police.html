<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>Полицейский</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <script src="https://kit.fontawesome.com/a076d05399.js" crossorigin="anonymous"></script>
</head>
<body>
<h1>Добро пожаловать на домашнюю страницу полиции!</h1>

<h2>Досье подозреваемых</h2>

<div class="search-container">
    <input type="text" id="detectiveSearchInput" placeholder="Введите ключевое слово...">
    <button onclick="filterSuspectCards()">Поиск</button>
</div>

<div class="cards-container" id="detectiveSuspectCards">
    {% for s in suspects %}
    <div class="card suspect-card" 
         onclick="openModal('{{ s.name }}', '{{ s.description }}', 'suspect')"
         data-description="{{ s.description }}">
        <i class="fas fa-user"></i>
        <h3>{{ s.name }}</h3>
    </div>
    {% endfor %}
</div>

<h2>Информация о сотрудниках полиции</h2>
<div class="search-container">
    <input type="text" id="searchInput" placeholder="Введите ключевое слово...">
    <button onclick="filterPolicemenCards()">Поиск</button>
</div>

<div class="cards-container" id="policeCards">
    {% for p in police %}
    <div class="card police-card" 
         data-description="{{ p.description }}"
         onclick="openModal('{{ p.name }}', '{{ p.description }}', 'police')">
        <i class="fas fa-user-shield"></i>
        <h3>{{ p.name }}</h3>
    </div>
    {% endfor %}
</div>

<!-- Модальное окно -->
<div id="modal" class="modal">
    <div class="modal-content">
        <span class="close" onclick="closeModal()">&times;</span>
        <h2 id="modal-title"></h2>
        <p id="modal-desc"></p>
    </div>
</div>

<script>
function openModal(title, desc, type) {
    document.getElementById('modal-title').innerText = title;
    document.getElementById('modal-desc').innerHTML = desc;
    document.getElementById('modal').style.display = "block";
    
    const modalContent = document.querySelector('.modal-content');
    if(type === 'suspect') {
        modalContent.style.borderTop = "5px solid #e74c3c"; // красный для подозреваемых
    } else if(type === 'guide') {
        modalContent.style.borderTop = "5px solid #3498db"; // синий для методичек
    } else if(type === 'police') {
        modalContent.style.borderTop = "5px solid #2ecc71"; // зелёный для полицейских
    }
}

function filterSuspectCards() {
    const keyword = document.getElementById('detectiveSearchInput').value.toLowerCase();
    const cards = document.querySelectorAll('#detectiveSuspectCards .card');
    cards.forEach(card => {
        const desc = card.getAttribute('data-description').toLowerCase();
        card.style.display = desc.includes(keyword) ? 'block' : 'none';
    });
}


function closeModal() {
    document.getElementById('modal').style.display = "none";
}

window.onclick = function(event) {
    const modal = document.getElementById('modal');
    if (event.target == modal) {
        modal.style.display = "none";
    }
}

// Фильтр поиска
function filterPolicemenCards() {
    const keyword = document.getElementById('searchInput').value.toLowerCase();
    const cards = document.querySelectorAll('#policeCards .card');
    cards.forEach(card => {
        const desc = card.getAttribute('data-description').toLowerCase();
        card.style.display = desc.includes(keyword) ? 'block' : 'none';
    });
}

document.getElementById('searchInput').addEventListener('input', filterPolicemenCards);
document.getElementById('detectiveSearchInput').addEventListener('input', filterSuspectCards);

</script>

</body>
</html>
